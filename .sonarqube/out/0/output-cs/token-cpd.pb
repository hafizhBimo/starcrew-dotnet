¬
U/Users/hafizhbimo/Documents/project/starcrew/starcrew-dotnet/src/models/users/user.cs
	namespace 	
StarCrew
 
. 
Models 
; 
[ 
Table 
( 
$str 
) 
] 
public 
class 
User 
{ 
[ 
Column 
( 
$str 
) 
] 
public		 

int		 
Id		 
{		 
get		 
;		 
set		 
;		 
}		 
[

 
Column

 
(

 
$str

 
)

 
]

 
public 

string 
? 
Username 
{ 
get !
;! "
set# &
;& '
}( )
[ 
Column 
( 
$str 
) 
] 
public 

string 
? 
Email 
{ 
get 
; 
set  #
;# $
}% &
[ 
Column 
( 
$str 
) 
] 
public 

string 
? 
Password_hash  
{! "
get# &
;& '
set( +
;+ ,
}- .
[ 
Column 
( 
$str 
) 
] 
public 

string 
? 
Bio 
{ 
get 
; 
set !
;! "
}# $
[ 
Column 
( 
$str 
) 
] 
public 

string 
? 

Avatar_url 
{ 
get  #
;# $
set% (
;( )
}* +
[ 
Column 
( 
$str 
) 
] 
public 

DateTime 

Created_at 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 
Column 
( 
$str 
) 
] 
public 

bool 
Is_superadmin 
{ 
get  #
;# $
set% (
;( )
}* +
[ 
Column 
( 
$str 
) 
] 
public 

string 
? 
Public_name 
{  
get! $
;$ %
set& )
;) *
}+ ,
} ï
U/Users/hafizhbimo/Documents/project/starcrew/starcrew-dotnet/src/models/posts/post.cs
	namespace 	
StarCrew
 
. 
Models 
; 
[ 
Table 
( 
$str 
) 
] 
public 
class 
Post 
{ 
[		 
Column		 
(		 
$str		 
)		 
]		 
public

 

int

 
Id

 
{

 
get

 
;

 
set

 
;

 
}

 
[ 
Column 
( 
$str 
) 
] 
public 

int 
User_id 
{ 
get 
; 
set !
;! "
}# $
[ 
Column 
( 
$str 
) 
] 
public 

string 
? 
Content 
{ 
get  
;  !
set" %
;% &
}' (
[ 
Column 
( 
$str 
) 
] 
public 

string 
? 
	Image_url 
{ 
get "
;" #
set$ '
;' (
}) *
[ 
Column 
( 
$str 
) 
] 
public 

DateTime 

Created_at 
{  
get! $
;$ %
set& )
;) *
}+ ,
} ì
W/Users/hafizhbimo/Documents/project/starcrew/starcrew-dotnet/src/models/appDbContext.cs
	namespace 	
StarCrew
 
. 
Data 
; 
public 
class 
AppDbContext 
: 
	DbContext %
{ 
public 

AppDbContext 
( 
DbContextOptions (
<( )
AppDbContext) 5
>5 6
options7 >
)> ?
:@ A
baseB F
(F G
optionsG N
)N O
{P Q
}R S
public

 

DbSet

 
<

 
User

 
>

 
Users

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 

DbSet 
< 
Post 
> 
Posts 
{ 
get "
;" #
set$ '
;' (
}) *
} Ç2
_/Users/hafizhbimo/Documents/project/starcrew/starcrew-dotnet/src/Controllers/UsersController.cs
	namespace 	
StarCrew
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
UsersController  
:! "
ControllerBase# 1
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
UsersController 
( 
AppDbContext +
context, 3
)3 4
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
User3 7
>7 8
>8 9
>9 :
GetUsers; C
(C D
)D E
{ 	
return 
await 
_context !
.! "
Users" '
.' (
ToListAsync( 3
(3 4
)4 5
;5 6
} 	
[!! 	
HttpGet!!	 
(!! 
$str!! 
)!! 
]!! 
public"" 
async"" 
Task"" 
<"" 
ActionResult"" &
<""& '
User""' +
>""+ ,
>"", -
GetUser"". 5
(""5 6
int""6 9
id"": <
)""< =
{## 	
var$$ 
user$$ 
=$$ 
await$$ 
_context$$ %
.$$% &
Users$$& +
.$$+ ,
	FindAsync$$, 5
($$5 6
id$$6 8
)$$8 9
;$$9 :
if&& 
(&& 
user&& 
==&& 
null&& 
)&& 
{'' 
return(( 
NotFound(( 
(((  
)((  !
;((! "
})) 
return++ 
user++ 
;++ 
},, 	
[00 	
HttpPut00	 
(00 
$str00 
)00 
]00 
public11 
async11 
Task11 
<11 
IActionResult11 '
>11' (
PutUser11) 0
(110 1
int111 4
id115 7
,117 8
User119 =
user11> B
)11B C
{22 	
if33 
(33 
id33 
!=33 
user33 
.33 
Id33 
)33 
{44 
return55 

BadRequest55 !
(55! "
)55" #
;55# $
}66 
_context88 
.88 
Entry88 
(88 
user88 
)88  
.88  !
State88! &
=88' (
EntityState88) 4
.884 5
Modified885 =
;88= >
try:: 
{;; 
await<< 
_context<< 
.<< 
SaveChangesAsync<< /
(<</ 0
)<<0 1
;<<1 2
}== 
catch>> 
(>> (
DbUpdateConcurrencyException>> /
)>>/ 0
{?? 
if@@ 
(@@ 
!@@ 

UserExists@@ 
(@@  
id@@  "
)@@" #
)@@# $
{AA 
returnBB 
NotFoundBB #
(BB# $
)BB$ %
;BB% &
}CC 
elseDD 
{EE 
throwFF 
;FF 
}GG 
}HH 
returnJJ 
	NoContentJJ 
(JJ 
)JJ 
;JJ 
}KK 	
[OO 	
HttpPostOO	 
]OO 
publicPP 
asyncPP 
TaskPP 
<PP 
ActionResultPP &
<PP& '
UserPP' +
>PP+ ,
>PP, -
PostUserPP. 6
(PP6 7
UserPP7 ;
userPP< @
)PP@ A
{QQ 	
userRR 
.RR 
Password_hashRR 
=RR  
HashPasswordRR! -
(RR- .
userRR. 2
.RR2 3
Password_hashRR3 @
)RR@ A
;RRA B
_contextSS 
.SS 
UsersSS 
.SS 
AddSS 
(SS 
userSS #
)SS# $
;SS$ %
awaitTT 
_contextTT 
.TT 
SaveChangesAsyncTT +
(TT+ ,
)TT, -
;TT- .
returnVV 
CreatedAtActionVV "
(VV" #
$strVV# ,
,VV, -
newVV. 1
{VV2 3
idVV4 6
=VV7 8
userVV9 =
.VV= >
IdVV> @
}VVA B
,VVB C
userVVD H
)VVH I
;VVI J
}WW 	
[ZZ 	

HttpDeleteZZ	 
(ZZ 
$strZZ 
)ZZ 
]ZZ 
public[[ 
async[[ 
Task[[ 
<[[ 
IActionResult[[ '
>[[' (

DeleteUser[[) 3
([[3 4
int[[4 7
id[[8 :
)[[: ;
{\\ 	
var]] 
user]] 
=]] 
await]] 
_context]] %
.]]% &
Users]]& +
.]]+ ,
	FindAsync]], 5
(]]5 6
id]]6 8
)]]8 9
;]]9 :
if^^ 
(^^ 
user^^ 
==^^ 
null^^ 
)^^ 
{__ 
return`` 
NotFound`` 
(``  
)``  !
;``! "
}aa 
_contextcc 
.cc 
Userscc 
.cc 
Removecc !
(cc! "
usercc" &
)cc& '
;cc' (
awaitdd 
_contextdd 
.dd 
SaveChangesAsyncdd +
(dd+ ,
)dd, -
;dd- .
returnff 
	NoContentff 
(ff 
)ff 
;ff 
}gg 	
privateii 
boolii 

UserExistsii 
(ii  
intii  #
idii$ &
)ii& '
{jj 	
returnkk 
_contextkk 
.kk 
Userskk !
.kk! "
Anykk" %
(kk% &
ekk& '
=>kk( *
ekk+ ,
.kk, -
Idkk- /
==kk0 2
idkk3 5
)kk5 6
;kk6 7
}ll 	
}mm 
}nn ù0
_/Users/hafizhbimo/Documents/project/starcrew/starcrew-dotnet/src/Controllers/PostsController.cs
	namespace 	
StarCrew
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
PostsController  
:! "
ControllerBase# 1
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
PostsController 
( 
AppDbContext +
context, 3
)3 4
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Post3 7
>7 8
>8 9
>9 :
GetPosts; C
(C D
)D E
{ 	
return 
await 
_context !
.! "
Posts" '
.' (
ToListAsync( 3
(3 4
)4 5
;5 6
} 	
[   	
HttpGet  	 
(   
$str   
)   
]   
public!! 
async!! 
Task!! 
<!! 
ActionResult!! &
<!!& '
Post!!' +
>!!+ ,
>!!, -
GetPost!!. 5
(!!5 6
int!!6 9
id!!: <
)!!< =
{"" 	
var## 
post## 
=## 
await## 
_context## %
.##% &
Posts##& +
.##+ ,
	FindAsync##, 5
(##5 6
id##6 8
)##8 9
;##9 :
if%% 
(%% 
post%% 
==%% 
null%% 
)%% 
{&& 
return'' 
NotFound'' 
(''  
)''  !
;''! "
}(( 
return** 
post** 
;** 
}++ 	
[// 	
HttpPut//	 
(// 
$str// 
)// 
]// 
public00 
async00 
Task00 
<00 
IActionResult00 '
>00' (
PutPost00) 0
(000 1
int001 4
id005 7
,007 8
Post009 =
post00> B
)00B C
{11 	
if22 
(22 
id22 
!=22 
post22 
.22 
Id22 
)22 
{33 
return44 

BadRequest44 !
(44! "
)44" #
;44# $
}55 
_context77 
.77 
Entry77 
(77 
post77 
)77  
.77  !
State77! &
=77' (
EntityState77) 4
.774 5
Modified775 =
;77= >
try99 
{:: 
await;; 
_context;; 
.;; 
SaveChangesAsync;; /
(;;/ 0
);;0 1
;;;1 2
}<< 
catch== 
(== (
DbUpdateConcurrencyException== /
)==/ 0
{>> 
if?? 
(?? 
!?? 

PostExists?? 
(??  
id??  "
)??" #
)??# $
{@@ 
returnAA 
NotFoundAA #
(AA# $
)AA$ %
;AA% &
}BB 
elseCC 
{DD 
throwEE 
;EE 
}FF 
}GG 
returnII 
	NoContentII 
(II 
)II 
;II 
}JJ 	
[NN 	
HttpPostNN	 
]NN 
publicOO 
asyncOO 
TaskOO 
<OO 
ActionResultOO &
<OO& '
PostOO' +
>OO+ ,
>OO, -
PostPostOO. 6
(OO6 7
PostOO7 ;
postOO< @
)OO@ A
{PP 	
_contextQQ 
.QQ 
PostsQQ 
.QQ 
AddQQ 
(QQ 
postQQ #
)QQ# $
;QQ$ %
awaitRR 
_contextRR 
.RR 
SaveChangesAsyncRR +
(RR+ ,
)RR, -
;RR- .
returnTT 
CreatedAtActionTT "
(TT" #
$strTT# ,
,TT, -
newTT. 1
{TT2 3
idTT4 6
=TT7 8
postTT9 =
.TT= >
IdTT> @
}TTA B
,TTB C
postTTD H
)TTH I
;TTI J
}UU 	
[XX 	

HttpDeleteXX	 
(XX 
$strXX 
)XX 
]XX 
publicYY 
asyncYY 
TaskYY 
<YY 
IActionResultYY '
>YY' (

DeletePostYY) 3
(YY3 4
intYY4 7
idYY8 :
)YY: ;
{ZZ 	
var[[ 
post[[ 
=[[ 
await[[ 
_context[[ %
.[[% &
Posts[[& +
.[[+ ,
	FindAsync[[, 5
([[5 6
id[[6 8
)[[8 9
;[[9 :
if\\ 
(\\ 
post\\ 
==\\ 
null\\ 
)\\ 
{]] 
return^^ 
NotFound^^ 
(^^  
)^^  !
;^^! "
}__ 
_contextaa 
.aa 
Postsaa 
.aa 
Removeaa !
(aa! "
postaa" &
)aa& '
;aa' (
awaitbb 
_contextbb 
.bb 
SaveChangesAsyncbb +
(bb+ ,
)bb, -
;bb- .
returndd 
	NoContentdd 
(dd 
)dd 
;dd 
}ee 	
privategg 
boolgg 

PostExistsgg 
(gg  
intgg  #
idgg$ &
)gg& '
{hh 	
returnii 
_contextii 
.ii 
Postsii !
.ii! "
Anyii" %
(ii% &
eii& '
=>ii( *
eii+ ,
.ii, -
Idii- /
==ii0 2
idii3 5
)ii5 6
;ii6 7
}jj 	
}kk 
}ll Ã
G/Users/hafizhbimo/Documents/project/starcrew/starcrew-dotnet/Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder		 
.		 
Services		 
.		 #
AddEndpointsApiExplorer		 (
(		( )
)		) *
;		* +
builder

 
.

 
Services

 
.

 
AddSwaggerGen

 
(

 
c

  
=>

! #
{ 
c 
. 

SwaggerDoc 
( 
$str 
, 
new 
OpenApiInfo &
{' (
Title) .
=/ 0
$str1 9
,9 :
Version; B
=C D
$strE I
}J K
)K L
;L M
} 
) 
; 
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. 
AddDbContext 
< 
AppDbContext *
>* +
(+ ,
options, 3
=>4 6
options 
. 
	UseNpgsql 
( 
builder 
. 
Configuration +
.+ ,
GetConnectionString, ?
(? @
$str@ S
)S T
)T U
)U V
;V W
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app 
. 
MapGet 

(
 
$str 
, 
( 
) 
=> 
$str $
)$ %
;% &
app 
. 
MapControllers 
( 
) 
; 
app 
. 
Run 
( 
) 	
;	 
